Liverpool survived a major scare and produced a miraculous comeback in Villarreal, as they battled back from 2-0 down to win 3-2 - and 5-2 on aggregrate. At half-time the tie was level, but normality was restored and it is Liverpool that will play in the Champions League final. Jurgen Klopp's men secured their spot after Luis Diaz' second-half introduction inspired a fantastic comeback against Villarreal. The Spanish side made the dream start as Boulaye Dia fired the hosts ahead inside three minutes, and Liverpool found themselves 2-0 down shortly before half-time as Francis Coquelin levelled the tie with a free header. Liverpool were stunned by Unai Emery's side, and a major upset looked to be on the cards. But Diaz came on to start the second-half, and the game completely changed. Fabinho fired through the legs of the Villarreal goalkeeper, Diaz then grabbed himself a goal and Sadio Mane rounded the goalkeeper to complete the turnaround. Here Express Sport take a look at five things we learned as Liverpool book their place in the final. JUST IN: Ronaldo sparks confusion on Man Utd future by denying TV camera hint  Naby Keita was a surprise inclusion in the Liverpool line-up, especially with how well Jordan Henderson performed in the first leg. But after Keita scored the only goal of the game against Newcastle on Saturday, Klopp rewarded the midfielder with a huge opportunity. But the Guinean had a first-half to forget, and was completely out of his depth. Keita has struggled for consistency since signing from RB Leipzig back in 2016, and his Liverpool career may be in doubt. Klopp's given the midfielder plenty of chances this season in a bid to save his reputation, as well as his future place in the team. But Tuesday's showing may prove that he isn't cut-out for this Liverpool team. READ MORE: Arsenal clearout set to begin as Arteta 'accelerates' £12.6m exit  The Villarreal from the first-leg was nowhere to be seen on Tuesday, as the side that sat back, and allowed Liverpool to have possession completely changed game-plan. Emery almost used Liverpool as the perfect case study, as they played with a high defensive line and smothered their opposition with the press. Villarreal replicated Liverpool's style of play, and it stunned the Reds who weren't expecting their approach. And if weren't sure what colours the two sides were wearing in the first-half, you'd be shocked to learn that Liverpool weren't in yellow. The Spanish side were well deserved of their 2-0 lead at half-time, and they could've been further ahead in one of the biggest matches in their history. But they resorted back to their former selves in the second-half, and completely threw the match.  Villarreal have proved that this Liverpool team that appeared impossible to stop, can indeed be rocked. Although they undid all of their hard work in the second-half. But their start to the game will worry Liverpool, especially with an FA Cup final upcoming, and a Premier League title race to fight for. The Spanish side have given confidence to Liverpool's future opponents after leading by example. And their pressure even altered how Liverpool operated in the first-half on Tuesday. Liverpool play a certain system, and whether it's the first or the last minute, they play the same way. But they started making uncharacteristic passes and strange decisions, proving that they can be affected after all.  They may have been denied the fairy-tale story this time around, but Emery will be back in one way or another. The Villarreal boss has demonstrated his European tools on a number of occasions, and he must be in the conversation the next time a major club are looking for a new manager. The Arsenal failure may be a blip on his record, but he has proved time and time again since his time in north London that he is tactically brilliant. The Spaniard has won four Europa League titles, and almost took Arsenal all the way during his first season. He knows how to win the big games, and he will be incredibly proud of his sides performance against Liverpool despite an awful end to the night. Villarreal are the first side all season to rock Liverpool in this way, and that's quite an achievement.  It may not have been the perfect night for Liverpool, far from it. But they got the job done and in doing so, have guaranteed that they will have to play every single game possible in a single season. With 38 games in the Premier League, and the fact that they have reached the final of every cup competition, it isn't possible for Liverpool to have played anymore games this season. And that shows just how brilliant they have been this year, even if they fail to win an another trophy. Every single match between now and the end of the season is like a cup final for Liverpool, and they are so close to completing the perfect season. But they still need a lot of luck if they are going to stand a chance, including a slip-up from Manchester City. 